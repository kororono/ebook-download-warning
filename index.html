<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Download Warning</title>
    <style>
        /* Styling for the page */
        body {
            background-color: black;
            color: white;
            text-align: center;
            font-family: Arial, sans-serif;
        }
        .info-box {
            border: 2px solid white;
            padding: 20px;
            margin: 20px auto;
            width: 80%;
            max-width: 500px;
        }
        h1 {
            color: red; /* Make the warning title stand out */
        }
        p {
            margin: 10px 0;
        }
    </style>
    <script>
        // Function to get the user's IP address and location details
        async function fetchIPandLocation() {
            try {
                const ipResponse = await fetch('https://api.ipify.org?format=json');
                const ipData = await ipResponse.json();
                document.getElementById('user-ip').innerText = ipData.ip;

                // Get location data based on IP
                const locationResponse = await fetch(`http://ip-api.com/json/${ipData.ip}`);
                const locationData = await locationResponse.json();

                if (locationData.status === "success") {
                    document.getElementById('location-info').innerHTML = `
                        City: ${locationData.city} <br>
                        Region: ${locationData.regionName} <br>
                        Country: ${locationData.country} <br>
                        Latitude: ${locationData.lat} <br>
                        Longitude: ${locationData.lon} <br>
                        ISP: ${locationData.isp}`;
                    
                    // Check if the location is in Kenya
                    const isInKenya = locationData.country === "Kenya";
                    document.getElementById('vpn-info').innerText = isInKenya
                        ? "Your location is consistent with the expected region."
                        : "It appears you are not accessing from Kenya. This might indicate the use of a VPN.";

                } else {
                    document.getElementById('location-info').innerText = "Unable to determine location.";
                    document.getElementById('vpn-info').innerText = "";
                }
            } catch (error) {
                console.error('Error fetching IP or location:', error);
                document.getElementById('location-info').innerText = "Unable to determine location.";
                document.getElementById('vpn-info').innerText = "";
            }
        }

        // Function to redirect to the actual download after displaying a warning
        function redirectToDownload() {
            alert("Reminder: Your IP address has been recorded. Do not share this file or you will be disqualified.");
            window.location.href = "https://example.com/your-download-link.pdf"; // Replace with your actual download link
        }

        // Fetch IP and location on page load
        window.onload = fetchIPandLocation;
    </script>
</head>
<body>
    <h1>Warning!</h1>
    <div class="info-box">
        <p>Your IP address: <span id="user-ip">[Fetching IP...]</span></p>
        <p>Your approximate location:</p>
        <p id="location-info">[Fetching Location...]</p>
        <p id="vpn-info">[Checking VPN...]</p>
    </div>
    <p style="color: yellow; margin-top: 20px;">
        This is a warning! Sharing this document will lead to immediate disqualification from the treasure hunt. 
        We have your IP address, your location, and your contact details. If you break the rules, you will be 
        disqualified, and you will receive an email or text notification. We know if you are using a VPN.
    </p>
    <button onclick="redirectToDownload()">Continue to Download</button>
</body>
</html>
